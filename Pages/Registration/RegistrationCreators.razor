@using GamaExamFullstack.Data

@page "/register/creator"

@inject CustomHttpClient Http
@inject NavigationManager NavigationManager
@inject AppSettingsService AppSettingsService
@inject IMatToaster Toaster


<style>
    .matcard-centered {
        position: fixed;
        top: 50%;
        left: 50%;
        padding: 20px;
        width: 450px;
    }
</style>


<div>
    <MatCard Class="matcard-centered" Style="box-shadow: 10px">
        <MatHeadline6 Class="text-center">Registration Creators</MatHeadline6>
        <MatTextField @bind-Value="@creator.username" Label="Username"></MatTextField>
        <p></p>
        <MatTextField @bind-Value="@creator.name" Label="Name"></MatTextField>
        <p></p>
        <MatTextField @bind-Value="@creator.institute" Label="Institute"></MatTextField>
        <p></p>
        <MatTextField @bind-Value="@creator.password" Label="Password" Type="password"></MatTextField>
        <p></p>
        <div class="d-inline-block">
            <MatButton Raised="true" OnClick="@RegisterCreator" Style="float:left;">Create Account</MatButton>
            <MatButton Raised="true" OnClick="@Cancel" Style="float:right;">Cancel</MatButton>
        </div>

    </MatCard>
</div>


@code {
    DCreator creator = new DCreator();


    protected async Task RegisterCreator()
    {
        if (creator.username != null && creator.name != null && creator.password != null && creator.institute != null)
        {
            await Http.PostJsonAsync("https://localhost:5001/api/DCreators", creator);
            NavigationManager.NavigateTo("listcreators");
        }
        else Toaster.Add("Please do not leave any field empty", MatToastType.Danger);

    }
    void Cancel()
    {
        NavigationManager.NavigateTo("listcreators");
    }

}
